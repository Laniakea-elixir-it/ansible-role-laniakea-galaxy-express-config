runners:
  local_runner:
    load: galaxy.jobs.runners.local:LocalJobRunner
    workers: 4
{% if galaxy_runner == "condor" or galaxy_runner == "tpv_dispatcher"%}
  condor:
    load: galaxy.jobs.runners.condor:CondorJobRunner
{% endif%}
handling:
  assign: ['db-skip-locked']
execution:
  default: {{Â galaxy_runner }}
  environments:
    local_env:
      runner: local_runner
      local_slots: {{ galaxy_workers }}
      tmp_dir: true
{% if galaxy_runner == "condor" or galaxy_runner == "tpv_dispatcher" %}
    condor:
      runner: condor
{% endif %}
{% if galaxy_runner == "tpv_dispatcher" %}
    tpv_dispatcher:
      runner: dynamic
      type: python
      function: map_tool_to_destination
      rules_module: tpv.rules
      tpv_config_files:
        - https://raw.githubusercontent.com/galaxyproject/tpv-shared-database/main/tools.yml
        - {{ laniakea_galaxy_config_dir }}/tpv_rules_local.yml
{% endif %}
tools:
  - class: local # these special tools that aren't parameterized for remote execution - expression tools, upload, etc
    environment: local_env
